#include <stdio.h>

    int isbns[100];
    char titles[100][50];
    float prices[100];
    int quantities[100];
    int opt; int count = 0;
void addbook()
{
    printf("\nEnter isbn number : ");
    scanf("%d", &isbns[count]);
    int sameIsbn = isbns[count];
    int duplicate = 0;
    for(int i = 0; i < count; i++)
    {
        if(isbns[i] == sameIsbn)
        {
            duplicate = 1;
        }
    }
    if(!duplicate)
    {
        isbns[count] = sameIsbn;
        printf("\nEnter title : ");
        scanf("%s", titles[count]);
        printf("\nEnter price : ");
        scanf("%f", &prices[count]);
        printf("\nEnter quantity : ");
        scanf("%d", &quantities[count]);
        count++;
    }
}
void SaleProcess()
{
    int checkIsbn;
    printf("\nEnter isbn number : ");
    scanf("%d", &checkIsbn);
    int copies = 0; int found = 0;
    for(int i = 0; i < count; i++)
    {
        if(isbns[i] == checkIsbn)
        {
            found = 1;
            printf("\nEnter number of copies you want to buy : ");
            scanf("%d", &copies);
            if(copies > quantities[i])
            {
                printf("\nOut of Stock");
            }
            else{
                quantities[i] -= copies;
                printf("\nSale processed successfully");
            }
            break;
        }
    }
    if(!found)
    {
        printf("Book with ISBN %d not found!\n", checkIsbn);
    }
}
void lowStock()
{
    int found = 0;
    printf("\nDetails of all books where the quantity has fallen below 5");
    for(int i = 0; i < count; i++)
    {
        if(quantities[i] < 5)
        {
            found = 1;
            printf("\nISBN : %d", isbns[i]);
            printf("\nTitle : %s", titles[i]);
            printf("\nPrice : %.2f", prices[i]);
            printf("\nQuantity : %d", quantities[i]);
        }
    }
    if(!found)
    {
        printf("\nNo books with low stock");
    }
}
int main()
{
    printf("== Library Inventory ==");
    while(1)
    {
        printf("\n---- Main Menu ----");
        printf("\n1 - Add New Book\n2 - Process a Sale\n3 - Generate Low-Stock Report");
        printf("\nEnter your choice : ");
        scanf("%d", &opt);
        switch(opt)
        {
            case 1:
                addbook();
                break;
            case 2:
                SaleProcess();
                break;
            case 3:
                lowStock();
                break;
            default:
                printf("\nInvalid Input");
                return 0;
        }
    }
}
